<!doctype html>
<html>
	<head>
		<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5S5WB7M');</script>
<!-- End Google Tag Manager -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ERJECQ081H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ERJECQ081H');
</script>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Interactive Web Apps Using Python</title>
		<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Interactive Web Apps Using Python | Victor Angelo Blancada</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Interactive Web Apps Using Python" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this post, I demonstrate how to deploy an interactive web application in just a little over two hundred lines of Python. A Python module called Dash is used - Dash was developed by Plotly by building on top of Flask, a popular Python web framework, to create an easy way to develop interactive web data visualizations using Python." />
<meta property="og:description" content="In this post, I demonstrate how to deploy an interactive web application in just a little over two hundred lines of Python. A Python module called Dash is used - Dash was developed by Plotly by building on top of Flask, a popular Python web framework, to create an easy way to develop interactive web data visualizations using Python." />
<link rel="canonical" href="https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html" />
<meta property="og:url" content="https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html" />
<meta property="og:site_name" content="Victor Angelo Blancada" />
<meta property="og:image" content="https://victorangeloblancada.github.io/assets/images/interactive.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-06-22T00:00:00+08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://victorangeloblancada.github.io/assets/images/interactive.jpg" />
<meta property="twitter:title" content="Interactive Web Apps Using Python" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-06-22T00:00:00+08:00","datePublished":"2021-06-22T00:00:00+08:00","description":"In this post, I demonstrate how to deploy an interactive web application in just a little over two hundred lines of Python. A Python module called Dash is used - Dash was developed by Plotly by building on top of Flask, a popular Python web framework, to create an easy way to develop interactive web data visualizations using Python.","headline":"Interactive Web Apps Using Python","image":"https://victorangeloblancada.github.io/assets/images/interactive.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html"},"url":"https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html"}</script>
<!-- End Jekyll SEO tag -->

		<link rel="stylesheet" href="https://indestructibletype.com/fonts/Jost.css" type="text/css" charset="utf-8" />

<link rel="stylesheet" href="/assets/css/styles.css">
<link rel="stylesheet" href="/assets/css/syntax.css">

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
	</head>
	<body>
		<script type="text/javascript">
  window.onscroll = function() {myScrollIndicator()};

  function myScrollIndicator() {
    var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    var scrolled = (winScroll / height) * 100;
    document.getElementById("myBar").style.width = scrolled + "%";
  }
</script>

<div class="header">
  <div class="progress-container">
    <div class="progress-bar" id="myBar"></div>
  </div>
</div>
		<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5S5WB7M"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
		<div class="wrapper">
			<link rel="stylesheet" href="/assets/css/speech-input.css">
<script src="/assets/js/nav.js" type="text/javascript"></script>
<script src="/assets/js/speech-input.js" type="text/javascript"></script>
<div class="navbar transition" id="navbar">
	<nav>
		<a onClick="expand('navbar', 'search-input')">
			<svg width="50" height="50" aria-label="search" class="octicon octicon-search" viewBox="0 0 24 24" version="1.1" role="img"><path fill-rule="evenodd" d="M10.25 2a8.25 8.25 0 105.28 14.59l5.69 5.69a.75.75 0 101.06-1.06l-5.69-5.69A8.25 8.25 0 0010.25 2zM3.5 10.25a6.75 6.75 0 1113.5 0 6.75 6.75 0 01-13.5 0z"></path></svg>
			<p>Search</p>
		</a>
		
			<a href="/" >
				<svg width="50" height="50" aria-label="home" class="octicon octicon-home" viewBox="0 0 24 24" version="1.1" role="img"><path fill-rule="evenodd" d="M11.03 2.59a1.5 1.5 0 011.94 0l7.5 6.363a1.5 1.5 0 01.53 1.144V19.5a1.5 1.5 0 01-1.5 1.5h-5.75a.75.75 0 01-.75-.75V14h-2v6.25a.75.75 0 01-.75.75H4.5A1.5 1.5 0 013 19.5v-9.403c0-.44.194-.859.53-1.144l7.5-6.363zM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 01.75-.75h3.5a.75.75 0 01.75.75v6.25h5v-9.403L12 3.734z"></path></svg>
				<p>Home</p>
			</a>
		
			<a href="/pages/about.html" >
				<svg width="50" height="50" aria-label="person" class="octicon octicon-person" viewBox="0 0 24 24" version="1.1" role="img"><path fill-rule="evenodd" d="M12 2.5a5.5 5.5 0 00-3.096 10.047 9.005 9.005 0 00-5.9 8.18.75.75 0 001.5.045 7.5 7.5 0 0114.993 0 .75.75 0 101.499-.044 9.005 9.005 0 00-5.9-8.181A5.5 5.5 0 0012 2.5zM8 8a4 4 0 118 0 4 4 0 01-8 0z"></path></svg>
				<p>About</p>
			</a>
		
			<a href="/blog.html" >
				<svg width="50" height="50" aria-label="book" class="octicon octicon-book" viewBox="0 0 24 24" version="1.1" role="img"><path fill-rule="evenodd" d="M0 3.75A.75.75 0 01.75 3h7.497c1.566 0 2.945.8 3.751 2.014A4.496 4.496 0 0115.75 3h7.5a.75.75 0 01.75.75v15.063a.75.75 0 01-.755.75l-7.682-.052a3 3 0 00-2.142.878l-.89.891a.75.75 0 01-1.061 0l-.902-.901a3 3 0 00-2.121-.879H.75a.75.75 0 01-.75-.75v-15zm11.247 3.747a3 3 0 00-3-2.997H1.5V18h6.947a4.5 4.5 0 012.803.98l-.003-11.483zm1.503 11.485V7.5a3 3 0 013-3h6.75v13.558l-6.927-.047a4.5 4.5 0 00-2.823.971z"></path></svg>
				<p>Blog</p>
			</a>
		
			<a href="/pages/resume-downloads.html" >
				<svg width="50" height="50" aria-label="file" class="octicon octicon-file" viewBox="0 0 24 24" version="1.1" role="img"><path fill-rule="evenodd" d="M5 2.5a.5.5 0 00-.5.5v18a.5.5 0 00.5.5h14a.5.5 0 00.5-.5V8.5h-4a2 2 0 01-2-2v-4H5zm10 0v4a.5.5 0 00.5.5h4a.5.5 0 00-.146-.336l-4.018-4.018A.5.5 0 0015 2.5zM3 3a2 2 0 012-2h9.982a2 2 0 011.414.586l4.018 4.018A2 2 0 0121 7.018V21a2 2 0 01-2 2H5a2 2 0 01-2-2V3z"></path></svg>
				<p>Résumé</p>
			</a>
		
	</nav>

	<!-- Html Elements for Search -->
	<div id="search-container" class="search-container">
		<center>
			<input type="text" id="search-input" class="speech-input" placeholder="Search this site" style="width: 100%;">
			<ol id="results-container"></ol>
		</center>
	</div>

	<!-- Script pointing to search.js -->
	<script src="/assets/js/search.js" type="text/javascript"></script>

	<!-- Configuration -->
	<script>
	SimpleJekyllSearch({
	  searchInput: document.getElementById('search-input'),
	  resultsContainer: document.getElementById('results-container'),
	  json: '/search.json'
	})
	</script>
</div>

</div>

			<div class="hero-img"  style="background-image: linear-gradient(rgba(0,0,0,.3), rgba(0,0,0,.3)), url( /assets/images/interactive.jpg );"  >
				<div class="center-content">
					<span class="on-bg">
						<h1> Interactive Web Apps Using Python </h1>
						<!--
						<p>22 Jun 2021</p>
						-->
						<a href="#start">
							<div style="-webkit-animation-name: pulse; -webkit-animation-duration: 2s; animation-name: pulse;animation-duration: 2s; animation-direction: alternate;">
								<!--<p>Reading time: 


  20 mins
</p>-->
								
								<p>June 22, 2021</p>
								
								<p>scroll for more</p>
								<svg width="50" height="50" fill="white" aria-label="down" class="octicon octicon-arrow-down" viewBox="0 0 24 24" version="1.1" role="img"><path fill-rule="evenodd" d="M4.97 13.22a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 10-1.06-1.06l-4.97 4.97V3.75a.75.75 0 00-1.5 0v14.44l-4.97-4.97a.75.75 0 00-1.06 0z"></path></svg>
							</div>
						</a>
						
						<div>
							

<style>
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div {
    position: relative;
    text-align: left; 
    height: 36px; 
    width: 32px; 
    float: left; 
    text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #FFF; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.pinterest:hover > svg {fill: #CB2027;}
#share-buttons > div.gplus:hover > svg {fill: #dd4b39;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > div.pinterest > svg {height: 20px; margin-top: 9px;}
#share-buttons > div.gplus > svg {height: 17px; margin-top: 9px; position: relative; left: 1px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}
</style>

<span>Share on: </span><div id="share-buttons">

    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>

    <div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    
    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>


    <!--<div class="pinterest" title="Share this on Pinterest" onclick="window.open('https://pinterest.com/pin/create/button/?url=&media=https://victorangeloblancada.github.io/assets/images/interactive.jpg&description=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M256 597q0-108 37.5-203.5t103.5-166.5 152-123 185-78 202-26q158 0 294 66.5t221 193.5 85 287q0 96-19 188t-60 177-100 149.5-145 103-189 38.5q-68 0-135-32t-96-88q-10 39-28 112.5t-23.5 95-20.5 71-26 71-32 62.5-46 77.5-62 86.5l-14 5-9-10q-15-157-15-188 0-92 21.5-206.5t66.5-287.5 52-203q-32-65-32-169 0-83 52-156t132-73q61 0 95 40.5t34 102.5q0 66-44 191t-44 187q0 63 45 104.5t109 41.5q55 0 102-25t78.5-68 56-95 38-110.5 20-111 6.5-99.5q0-173-109.5-269.5t-285.5-96.5q-200 0-334 129.5t-134 328.5q0 44 12.5 85t27 65 27 45.5 12.5 30.5q0 28-15 73t-37 45q-2 0-17-3-51-15-90.5-56t-61-94.5-32.5-108-11-106.5z"/></svg></div>-->

    <!--<div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div>-->

    <div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>

</div>
						</div>
						
					</span>
				</div>
			</div>
			<div id="hero-img-spacer" style="height: 100vh;">
			</div>
			<div id="start">
			</div>
			<div class="content">
				
				<h1>Interactive Web Apps Using Python</h1>
				
				<!--
				<h1> Interactive Web Apps Using Python </h1>
				
				<p style="font-style:italic">June 22, 2021</p>
				
				-->

				<div class="article  dropcap ">
					<p>In this post, I demonstrate how to deploy an interactive web application in just a little over two hundred lines of Python. A Python module called <a href="https://plotly.com/dash/">Dash</a> is used - Dash was developed by <a href="https://plotly.com/dash/">Plotly</a> by building on top of <a href="https://flask.palletsprojects.com/en/2.0.x/">Flask</a>, a popular Python web framework, to create an easy way to develop interactive web data visualizations using Python.</p>

<p>For this example, I have built a Dash app that performs <a href="https://en.wikipedia.org/wiki/One-way_analysis_of_variance">one-way analysis of variance</a> on a user-uploaded dataset. Here’s a silent video of the Dash app in action:</p>

<div class="yt-container">
	<iframe class="responsive-iframe" src="https://www.youtube.com/embed/ofmn4eIBwRo"></iframe>
</div>
<p>The GitHub repository for this project can be found <a href="https://github.com/victorangeloblancada/anova-dash">here</a>.</p>

<p>The full code for <strong>anova-dash.py</strong> from the video above can be found below. The <strong>anova-dash.py</strong> Python script allows us to run some calculations in Python, define some HTML whose contents come from the aforementioned Python calculations, and serve this HTML over localhost (or http://0.0.0.0) at our desired port (in this case, 8080) as it were a webpage.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">######################
## Import Libraries ##
######################
</span>
<span class="c1"># Libraries for Dash front-end
</span><span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">io</span>

<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">State</span>
<span class="kn">import</span> <span class="nn">dash_core_components</span> <span class="k">as</span> <span class="n">dcc</span>
<span class="kn">import</span> <span class="nn">dash_html_components</span> <span class="k">as</span> <span class="n">html</span>
<span class="kn">from</span> <span class="nn">dash_table</span> <span class="kn">import</span> <span class="n">DataTable</span>

<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="n">px</span>

<span class="c1"># Libraries for back-end analysis
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># Libraries for ANOVA
</span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="n">sm</span>
<span class="kn">from</span> <span class="nn">statsmodels.formula.api</span> <span class="kn">import</span> <span class="n">ols</span>

<span class="c1">######################
## Define Functions ##
######################
</span>
<span class="k">def</span> <span class="nf">parse_contents</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="s">"""Parse the contents of an uploaded file to a dataframe in Python
    contents: The contents of an uploaded file
    filename: The filename of an uploaded file
    """</span>
    <span class="n">content_type</span><span class="p">,</span> <span class="n">content_string</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">','</span><span class="p">)</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">content_string</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s">'csv'</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
            <span class="c1"># Assuming that the user uploaded a CSV file
</span>            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span>
                <span class="n">io</span><span class="p">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">decoded</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="s">'xls'</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
            <span class="c1"># Assuming that the user uploaded an excel file
</span>            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">io</span><span class="p">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">decoded</span><span class="p">))</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">render_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="s">"""Render a dataframe as an HTML table in Dash
    df: The source dataframe
    id: The element ID
    """</span>
    <span class="k">return</span> <span class="n">DataTable</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
                     <span class="n">columns</span><span class="o">=</span><span class="p">[{</span><span class="s">'name'</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s">'id'</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="p">.</span><span class="n">columns</span><span class="p">],</span>
                     <span class="c1"># export_format='xlsx',
</span>                     <span class="c1"># export_headers='display',
</span>                     <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s">'records'</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">render_bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x_col</span><span class="p">,</span> <span class="n">y_col</span><span class="p">):</span>
    <span class="s">"""Render a bar chart using Plotly
    df: The user-uploaded data
    x_col: The name of the input column for the ANOVA analysis
    y_col: The name of the response column for the ANOVA analysis
    """</span>
    <span class="k">return</span> <span class="n">px</span><span class="p">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> 
                  <span class="n">x</span><span class="o">=</span><span class="n">x_col</span><span class="p">,</span> 
                  <span class="n">y</span><span class="o">=</span><span class="n">y_col</span><span class="p">)</span>

<span class="c1">################
## App Layout ##
################
</span>
<span class="c1"># Formatting template file
</span><span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s">'https://codepen.io/chriddyp/pen/bWLwgP.css'</span><span class="p">]</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="p">.</span><span class="n">Dash</span><span class="p">(</span><span class="n">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="c1"># App title (appears in browser tab title or window's top bar)
</span><span class="n">app</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">'One-Way ANOVA'</span>

<span class="c1"># App layout
</span><span class="n">app</span><span class="p">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="p">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="c1"># A hidden table where the user-uploaded data will be temporarily cached while the user is accessing the web app
</span>    <span class="n">html</span><span class="p">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'input-data'</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s">'display'</span><span class="p">:</span> <span class="s">'none'</span><span class="p">}),</span>
    <span class="c1"># A header
</span>    <span class="n">html</span><span class="p">.</span><span class="n">H1</span><span class="p">(</span><span class="s">'One-Way ANOVA'</span><span class="p">),</span>
    <span class="c1"># A paragraph
</span>    <span class="n">html</span><span class="p">.</span><span class="n">P</span><span class="p">(</span><span class="s">'This web app performs a one-way analysis of variance on user-uploaded data.'</span><span class="p">),</span>
    <span class="c1"># Label for file upload component
</span>    <span class="n">html</span><span class="p">.</span><span class="n">H6</span><span class="p">(</span><span class="s">'File Upload'</span><span class="p">),</span>
    <span class="c1"># File upload component
</span>    <span class="n">dcc</span><span class="p">.</span><span class="n">Upload</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'upload-data'</span><span class="p">,</span>
        <span class="n">className</span><span class="o">=</span><span class="s">'upload'</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">html</span><span class="p">.</span><span class="n">P</span><span class="p">(</span><span class="s">'Drag and Drop or '</span><span class="p">),</span>
            <span class="n">html</span><span class="p">.</span><span class="n">A</span><span class="p">(</span><span class="s">'Select Files'</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="p">),</span>
    <span class="c1"># Label for dropdown
</span>    <span class="n">html</span><span class="p">.</span><span class="n">H6</span><span class="p">(</span><span class="s">'Input column (X)'</span><span class="p">),</span>
    <span class="c1"># A dropdown menu whose values are populated by the columns of user-uploaded data
</span>    <span class="n">dcc</span><span class="p">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'x-dropdown'</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
        <span class="p">]</span>
    <span class="p">),</span>
    <span class="c1"># Label for dropdown
</span>    <span class="n">html</span><span class="p">.</span><span class="n">H6</span><span class="p">(</span><span class="s">'Response column (Y)'</span><span class="p">),</span>
    <span class="c1"># A dropdown menu whose values are populated by the columns of user-uploaded data
</span>    <span class="n">dcc</span><span class="p">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'y-dropdown'</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
        <span class="p">]</span>
    <span class="p">),</span>
    <span class="c1"># Print/ show output of analysis
</span>    <span class="n">html</span><span class="p">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'output-section'</span><span class="p">)</span><span class="c1">#,
</span>    <span class="c1"># Display a chart
</span>    <span class="c1">#dcc.Graph(id='output-chart')
</span><span class="p">])</span>

<span class="c1">###################
## App Callbacks ##
###################
</span>
<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">callback</span><span class="p">([</span><span class="n">Output</span><span class="p">(</span><span class="s">'x-dropdown'</span><span class="p">,</span> <span class="s">'options'</span><span class="p">),</span>
               <span class="n">Output</span><span class="p">(</span><span class="s">'y-dropdown'</span><span class="p">,</span> <span class="s">'options'</span><span class="p">),</span>
               <span class="n">Output</span><span class="p">(</span><span class="s">'input-data'</span><span class="p">,</span> <span class="s">'children'</span><span class="p">)],</span>
              <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s">'upload-data'</span><span class="p">,</span> <span class="s">'contents'</span><span class="p">)],</span>
              <span class="p">[</span><span class="n">State</span><span class="p">(</span><span class="s">'upload-data'</span><span class="p">,</span> <span class="s">'filename'</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">load_data</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="s">"""Load data, populate dropdown menus, and temporarily cache data while user is accessing the web app 
    contents: Contents of the user-uploaded file
    filename: Name of the user-uploaded file
    """</span>
    <span class="c1"># Check if user has uploaded data
</span>    <span class="k">if</span> <span class="n">contents</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Load data
</span>        <span class="n">df</span> <span class="o">=</span> <span class="n">parse_contents</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="c1"># Populate dropdown menus
</span>        <span class="n">columns</span> <span class="o">=</span> <span class="p">[{</span><span class="s">'label'</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="n">col</span><span class="p">}</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="p">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="c1"># Temporarily store input data to hidden table while user is accessing the web app
</span>        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s">'iso'</span><span class="p">,</span> 
                        <span class="n">orient</span><span class="o">=</span><span class="s">'split'</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">columns</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">df</span>
    <span class="c1"># Don't do anything if user has not uploaded data
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">''</span>

<span class="c1">#@app.callback([Output('output-section', 'children'),
#               Output('output-chart', 'figure')],
</span><span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">callback</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="s">'output-section'</span><span class="p">,</span> <span class="s">'children'</span><span class="p">),</span>
              <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s">'input-data'</span><span class="p">,</span> <span class="s">'children'</span><span class="p">),</span>
               <span class="n">Input</span><span class="p">(</span><span class="s">'x-dropdown'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">),</span>
               <span class="n">Input</span><span class="p">(</span><span class="s">'y-dropdown'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">run_anova</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x_col</span><span class="p">,</span> <span class="n">y_col</span><span class="p">):</span>
    <span class="s">"""Run ANOVA and display results
    df: The user-uploaded data
    x_col: The name of the input column for the ANOVA analysis
    y_col: The name of the response column for the ANOVA analysis
    """</span>
    <span class="c1"># Check if user has uploaded data
</span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Load cached data from hidden table
</span>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s">'split'</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Run ANOVA
</span>            <span class="n">model</span> <span class="o">=</span> <span class="n">ols</span><span class="p">(</span><span class="n">y_col</span><span class="o">+</span><span class="s">' ~ C('</span><span class="o">+</span><span class="n">x_col</span><span class="o">+</span><span class="s">')'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">).</span><span class="n">fit</span><span class="p">()</span>
            <span class="n">aov_table</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">anova_lm</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">aov_table</span> <span class="o">=</span> <span class="n">aov_table</span><span class="p">.</span><span class="n">reset_index</span><span class="p">()</span>
            <span class="c1">#print(aov_table)
</span>
            <span class="c1"># Show ANOVA results as plain text
</span>            <span class="n">text_output</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">aov_table</span><span class="p">)</span>
            
            <span class="c1"># Show ANOVA results as a table
</span>            <span class="n">table_output</span> <span class="o">=</span> <span class="p">[</span><span class="n">render_table</span><span class="p">(</span><span class="n">aov_table</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">'anova-table'</span><span class="p">)]</span>

            <span class="c1"># Show the sum of squares as a bar chart
</span>            <span class="c1">#chart_output = render_bar(aov_table, x_col='index', y_col='sum_sq')
</span>
            <span class="k">return</span> <span class="n">table_output</span><span class="c1">#, chart_output
</span>        
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># Tell user to select input and response columns
</span>            <span class="n">text_output</span> <span class="o">=</span> <span class="s">'Please select valid input and response columns.'</span>
            <span class="c1"># Show a blank chart
</span>            <span class="c1">#chart_output = render_bar(pd.DataFrame({'x': [0], 'y': [0]}), x_col='x', y_col='y')
</span>            <span class="k">return</span> <span class="n">text_output</span><span class="c1">#, chart_output
</span>    
    <span class="c1"># Tell the user to upload data first if they have not yet uploaded data
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Tell user to select input and response columns
</span>        <span class="n">text_output</span> <span class="o">=</span> <span class="s">'Please upload data for analysis first.'</span>
        <span class="c1"># Show a blank chart
</span>        <span class="c1">#chart_output = render_bar(pd.DataFrame({'x': [0], 'y': [0]}), x_col='x', y_col='y')
</span>        <span class="k">return</span> <span class="n">text_output</span><span class="c1">#, chart_output
</span>
<span class="c1">################
## Run Server ##
################
</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s">'0.0.0.0'</span><span class="p">)</span>
</code></pre></div></div>

<p>Let’s go through the code section by section. I’ve divided the code into five parts:</p>

<ol>
  <li>Import Libraries</li>
  <li>Define Functions</li>
  <li>App Layout</li>
  <li>App Callbacks</li>
  <li>Run Server</li>
</ol>

<p>Part one, <strong>Import Libraries</strong>, is self-explanatory.</p>

<p>Part two, <strong>Define Functions</strong>, is also mostly self-explanatory but I’d like to point out how I’ve defined the functions <strong>render_table()</strong> and <strong>render_bar()</strong> for use later when we define the app layout in part three. The code within <strong>render_table()</strong> and <strong>render_bar()</strong> are Plotly and Dash functions for rendering a table and bar chart, respectively.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">render_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="s">"""Render a dataframe as an HTML table in Dash
    df: The source dataframe
    id: The element ID
    """</span>
    <span class="k">return</span> <span class="n">DataTable</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
                     <span class="n">columns</span><span class="o">=</span><span class="p">[{</span><span class="s">'name'</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s">'id'</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="p">.</span><span class="n">columns</span><span class="p">],</span>
                     <span class="c1"># export_format='xlsx',
</span>                     <span class="c1"># export_headers='display',
</span>                     <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s">'records'</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">render_bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x_col</span><span class="p">,</span> <span class="n">y_col</span><span class="p">):</span>
    <span class="s">"""Render a bar chart using Plotly
    df: The user-uploaded data
    x_col: The name of the input column for the ANOVA analysis
    y_col: The name of the response column for the ANOVA analysis
    """</span>
    <span class="k">return</span> <span class="n">px</span><span class="p">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> 
                  <span class="n">x</span><span class="o">=</span><span class="n">x_col</span><span class="p">,</span> 
                  <span class="n">y</span><span class="o">=</span><span class="n">y_col</span><span class="p">)</span>
</code></pre></div></div>

<p>Lastly, the <strong>parse_contents()</strong> function in part two uses the base64 module to converted a user-uploaded file (either an Excel file or a CSV file) into a Pandas DataFrame.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">parse_contents</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="s">"""Parse the contents of an uploaded file to a dataframe in Python
    contents: The contents of an uploaded file
    filename: The filename of an uploaded file
    """</span>
    <span class="n">content_type</span><span class="p">,</span> <span class="n">content_string</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">','</span><span class="p">)</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">content_string</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s">'csv'</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
            <span class="c1"># Assuming that the user uploaded a CSV file
</span>            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span>
                <span class="n">io</span><span class="p">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">decoded</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="s">'xls'</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
            <span class="c1"># Assuming that the user uploaded an excel file
</span>            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">io</span><span class="p">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">decoded</span><span class="p">))</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></div>

<p>Part three, <strong>App Layout</strong>, defines the web app layout using Dash functions. While a more in-depth discussion can be found in the <a href="https://dash.plotly.com/layout">Dash layout documentation</a>, I’d like to emphasize a few key takeaways. Firstly, this section defines a Dash app object named <strong>app</strong>. After specifying the app title, bulk of the code in this section defines the app layout in <strong>app.layout</strong> using Dash functions and classes from the dash_html_components (html) and dash_core_components (dcc) libraries. (Note: dash_html_components and dash_core_components have been renamed html and dcc, respectively, in the latest versions of Dash.)</p>

<p>The dash_html_components (html) functions and classes each correspond to a set of HTML tags which are added to the web app layout. For example, the <strong>html.Div()</strong> function generates a pair of <strong>&lt;div&gt;</strong> tags. Each dash_html_components (html) function includes the first positional children argument which defines what appears between the opening and closing HTML tags of the function. For example, the code <strong>html.Div(html.H1(‘Hello World!’))</strong> tells us that “Hello World!” is contained inside <strong>&lt;h1&gt;</strong> tags which are, in turn, contained inside <strong>&lt;div&gt;</strong> tags.</p>

<p>The dash_core_components (dcc) functions and classes have been built by the Dash development team to quickly define complex and often interactive components such as file upload menus, dropdown filters, and tables. Most of these components have been created in React.js.</p>

<p>It is also important to note that some of these functions have the <strong>id</strong> argument – this will be useful later on when defining callbacks in part four.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">################
## App Layout ##
################
</span>
<span class="c1"># Formatting template file
</span><span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s">'https://codepen.io/chriddyp/pen/bWLwgP.css'</span><span class="p">]</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="p">.</span><span class="n">Dash</span><span class="p">(</span><span class="n">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="c1"># App title (appears in browser tab title or window's top bar)
</span><span class="n">app</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">'One-Way ANOVA'</span>

<span class="c1"># App layout
</span><span class="n">app</span><span class="p">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="p">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="c1"># A hidden table where the user-uploaded data will be temporarily cached while the user is accessing the web app
</span>    <span class="n">html</span><span class="p">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'input-data'</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s">'display'</span><span class="p">:</span> <span class="s">'none'</span><span class="p">}),</span>
    <span class="c1"># A header
</span>    <span class="n">html</span><span class="p">.</span><span class="n">H1</span><span class="p">(</span><span class="s">'One-Way ANOVA'</span><span class="p">),</span>
    <span class="c1"># A paragraph
</span>    <span class="n">html</span><span class="p">.</span><span class="n">P</span><span class="p">(</span><span class="s">'This web app performs a one-way analysis of variance on user-uploaded data.'</span><span class="p">),</span>
    <span class="c1"># Label for file upload component
</span>    <span class="n">html</span><span class="p">.</span><span class="n">H6</span><span class="p">(</span><span class="s">'File Upload'</span><span class="p">),</span>
    <span class="c1"># File upload component
</span>    <span class="n">dcc</span><span class="p">.</span><span class="n">Upload</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'upload-data'</span><span class="p">,</span>
        <span class="n">className</span><span class="o">=</span><span class="s">'upload'</span><span class="p">,</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">html</span><span class="p">.</span><span class="n">P</span><span class="p">(</span><span class="s">'Drag and Drop or '</span><span class="p">),</span>
            <span class="n">html</span><span class="p">.</span><span class="n">A</span><span class="p">(</span><span class="s">'Select Files'</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="p">),</span>
    <span class="c1"># Label for dropdown
</span>    <span class="n">html</span><span class="p">.</span><span class="n">H6</span><span class="p">(</span><span class="s">'Input column (X)'</span><span class="p">),</span>
    <span class="c1"># A dropdown menu whose values are populated by the columns of user-uploaded data
</span>    <span class="n">dcc</span><span class="p">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'x-dropdown'</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
        <span class="p">]</span>
    <span class="p">),</span>
    <span class="c1"># Label for dropdown
</span>    <span class="n">html</span><span class="p">.</span><span class="n">H6</span><span class="p">(</span><span class="s">'Response column (Y)'</span><span class="p">),</span>
    <span class="c1"># A dropdown menu whose values are populated by the columns of user-uploaded data
</span>    <span class="n">dcc</span><span class="p">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'y-dropdown'</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
        <span class="p">]</span>
    <span class="p">),</span>
    <span class="c1"># Print/ show output of analysis
</span>    <span class="n">html</span><span class="p">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'output-section'</span><span class="p">)</span><span class="c1">#,
</span>    <span class="c1"># Display a chart
</span>    <span class="c1">#dcc.Graph(id='output-chart')
</span><span class="p">])</span>
</code></pre></div></div>

<p>Part four, <strong>App Callbacks</strong>, define functions which determine the interactivity of the Dash web app with respect to the Python calculations being done in the backend. These are different from the functions defined previously in part two as the app callbacks require function decorators to determine when they will be called. In Python, <a href="https://www.python.org/dev/peps/pep-0318/">decorators</a> allow us to take a function and add some functionality before it. Decorators allow us to perform “metaprogramming” by allowing a part of our program to modify another part of itself at compile time.</p>

<p>In Dash, function decorators are used to define what inputs are read into Python from the HTML frontend and where the values returned by the Python function are displayed in the HTML frontend.</p>

<p>For example, in the <strong>load_data()</strong> function below which returns three variables, each of these variables map to a function attribute from one of the html or dcc functions from the app layout defined in part three and identified by their <strong>id</strong> argument. For <strong>load_data()</strong>, <strong>Output(‘x-dropdown’, ‘options’)</strong> tells Python to send back the first function output to the options argument of the app layout component where id=“x-dropdown”, which is the dropdown menu defined in part three.</p>

<p>For inputs, it is similar yet slightly more complex. The <strong>load_data()</strong> function has two arguments, <strong>contents</strong> and <strong>filename</strong>. As defined by <strong>[Input(‘upload-data’, ‘contents’)]</strong>, <strong>contents</strong> are read from the <strong>contents</strong> value of the app layout component where id=“upload-data”, which is the file upload menu defined in part three. Furthermore, any change applied to the value of <strong>contents</strong> in the app layout will trigger running the <strong>load_data()</strong> function and update the outputs defined by the decorator. Meanwhile, the <strong>filename</strong> argument of the <strong>load_data()</strong> function is taken from the <strong>filename</strong> value of the app layout component where id=“upload-data”, as defined by <strong>[State(‘upload-data’, ‘filename’)]</strong>, <strong>filename</strong>. However, changing the <strong>filename</strong> value <em>will not</em> trigger running the <strong>load_data()</strong> function unlike changing the <strong>contents</strong> value since inputs defined using <strong>State()</strong> do not trigger running the function unlike those defined using <strong>Input()</strong>. For the <strong>load_data()</strong> function, this decorator design decision was made such that the function isn’t needlessly run twice when both the <strong>contents</strong> and <strong>filename</strong> values of the data upload component change (which is the usual case when a file with both a filename and contents is uploaded).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">callback</span><span class="p">([</span><span class="n">Output</span><span class="p">(</span><span class="s">'x-dropdown'</span><span class="p">,</span> <span class="s">'options'</span><span class="p">),</span>
               <span class="n">Output</span><span class="p">(</span><span class="s">'y-dropdown'</span><span class="p">,</span> <span class="s">'options'</span><span class="p">),</span>
               <span class="n">Output</span><span class="p">(</span><span class="s">'input-data'</span><span class="p">,</span> <span class="s">'children'</span><span class="p">)],</span>
              <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s">'upload-data'</span><span class="p">,</span> <span class="s">'contents'</span><span class="p">)],</span>
              <span class="p">[</span><span class="n">State</span><span class="p">(</span><span class="s">'upload-data'</span><span class="p">,</span> <span class="s">'filename'</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">load_data</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="s">"""Load data, populate dropdown menus, and temporarily cache data while user is accessing the web app 
    contents: Contents of the user-uploaded file
    filename: Name of the user-uploaded file
    """</span>
    <span class="c1"># Check if user has uploaded data
</span>    <span class="k">if</span> <span class="n">contents</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Load data
</span>        <span class="n">df</span> <span class="o">=</span> <span class="n">parse_contents</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="c1"># Populate dropdown menus
</span>        <span class="n">columns</span> <span class="o">=</span> <span class="p">[{</span><span class="s">'label'</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="n">col</span><span class="p">}</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="p">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="c1"># Temporarily store input data to hidden table while user is accessing the web app
</span>        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s">'iso'</span><span class="p">,</span> 
                        <span class="n">orient</span><span class="o">=</span><span class="s">'split'</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">columns</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">df</span>
    <span class="c1"># Don't do anything if user has not uploaded data
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">''</span>

<span class="c1">#@app.callback([Output('output-section', 'children'),
#               Output('output-chart', 'figure')],
</span><span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">callback</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="s">'output-section'</span><span class="p">,</span> <span class="s">'children'</span><span class="p">),</span>
              <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s">'input-data'</span><span class="p">,</span> <span class="s">'children'</span><span class="p">),</span>
               <span class="n">Input</span><span class="p">(</span><span class="s">'x-dropdown'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">),</span>
               <span class="n">Input</span><span class="p">(</span><span class="s">'y-dropdown'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">run_anova</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x_col</span><span class="p">,</span> <span class="n">y_col</span><span class="p">):</span>
    <span class="s">"""Run ANOVA and display results
    df: The user-uploaded data
    x_col: The name of the input column for the ANOVA analysis
    y_col: The name of the response column for the ANOVA analysis
    """</span>
    <span class="c1"># Check if user has uploaded data
</span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Load cached data from hidden table
</span>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s">'split'</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Run ANOVA
</span>            <span class="n">model</span> <span class="o">=</span> <span class="n">ols</span><span class="p">(</span><span class="n">y_col</span><span class="o">+</span><span class="s">' ~ C('</span><span class="o">+</span><span class="n">x_col</span><span class="o">+</span><span class="s">')'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">).</span><span class="n">fit</span><span class="p">()</span>
            <span class="n">aov_table</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">anova_lm</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">aov_table</span> <span class="o">=</span> <span class="n">aov_table</span><span class="p">.</span><span class="n">reset_index</span><span class="p">()</span>
            <span class="c1">#print(aov_table)
</span>
            <span class="c1"># Show ANOVA results as plain text
</span>            <span class="n">text_output</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">aov_table</span><span class="p">)</span>
            
            <span class="c1"># Show ANOVA results as a table
</span>            <span class="n">table_output</span> <span class="o">=</span> <span class="p">[</span><span class="n">render_table</span><span class="p">(</span><span class="n">aov_table</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">'anova-table'</span><span class="p">)]</span>

            <span class="c1"># Show the sum of squares as a bar chart
</span>            <span class="c1">#chart_output = render_bar(aov_table, x_col='index', y_col='sum_sq')
</span>
            <span class="k">return</span> <span class="n">table_output</span><span class="c1">#, chart_output
</span>        
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># Tell user to select input and response columns
</span>            <span class="n">text_output</span> <span class="o">=</span> <span class="s">'Please select valid input and response columns.'</span>
            <span class="c1"># Show a blank chart
</span>            <span class="c1">#chart_output = render_bar(pd.DataFrame({'x': [0], 'y': [0]}), x_col='x', y_col='y')
</span>            <span class="k">return</span> <span class="n">text_output</span><span class="c1">#, chart_output
</span>    
    <span class="c1"># Tell the user to upload data first if they have not yet uploaded data
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Tell user to select input and response columns
</span>        <span class="n">text_output</span> <span class="o">=</span> <span class="s">'Please upload data for analysis first.'</span>
        <span class="c1"># Show a blank chart
</span>        <span class="c1">#chart_output = render_bar(pd.DataFrame({'x': [0], 'y': [0]}), x_col='x', y_col='y')
</span>        <span class="k">return</span> <span class="n">text_output</span><span class="c1">#, chart_output
</span></code></pre></div></div>

<p>Lastly, part five runs the Flask server and specifies the port and the host.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s">'0.0.0.0'</span><span class="p">)</span>
</code></pre></div></div>

				</div>
				
				<div class="cta-box">
					

<style>
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div {
    position: relative;
    text-align: left; 
    height: 36px; 
    width: 32px; 
    float: left; 
    text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #FFF; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.pinterest:hover > svg {fill: #CB2027;}
#share-buttons > div.gplus:hover > svg {fill: #dd4b39;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > div.pinterest > svg {height: 20px; margin-top: 9px;}
#share-buttons > div.gplus > svg {height: 17px; margin-top: 9px; position: relative; left: 1px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}
</style>

<span>Share on: </span><div id="share-buttons">

    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>

    <div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    
    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>


    <!--<div class="pinterest" title="Share this on Pinterest" onclick="window.open('https://pinterest.com/pin/create/button/?url=&media=https://victorangeloblancada.github.io/assets/images/interactive.jpg&description=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M256 597q0-108 37.5-203.5t103.5-166.5 152-123 185-78 202-26q158 0 294 66.5t221 193.5 85 287q0 96-19 188t-60 177-100 149.5-145 103-189 38.5q-68 0-135-32t-96-88q-10 39-28 112.5t-23.5 95-20.5 71-26 71-32 62.5-46 77.5-62 86.5l-14 5-9-10q-15-157-15-188 0-92 21.5-206.5t66.5-287.5 52-203q-32-65-32-169 0-83 52-156t132-73q61 0 95 40.5t34 102.5q0 66-44 191t-44 187q0 63 45 104.5t109 41.5q55 0 102-25t78.5-68 56-95 38-110.5 20-111 6.5-99.5q0-173-109.5-269.5t-285.5-96.5q-200 0-334 129.5t-134 328.5q0 44 12.5 85t27 65 27 45.5 12.5 30.5q0 28-15 73t-37 45q-2 0-17-3-51-15-90.5-56t-61-94.5-32.5-108-11-106.5z"/></svg></div>-->

    <!--<div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div>-->

    <div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=https://victorangeloblancada.github.io/blog/2021/06/22/dash-apps.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>

</div>
				</div>
				
			</div>
			
			<center>
				<h2>Read more posts about...</h2>
				<ul class="tags">
					
						<a href='/blog/tag/blog'><li> blog </li></a>
					
						<a href='/blog/tag/python'><li> python </li></a>
					
						<a href='/blog/tag/web apps'><li> web apps </li></a>
					
						<a href='/blog/tag/web frameworks'><li> web frameworks </li></a>
					
						<a href='/blog/tag/dash'><li> dash </li></a>
					
				</ul>
				<a href='/blog.html'><p>See all posts</p></a>
			</center>
			
			<footer>
				<hr>
				© <script>document.write(new Date().getFullYear())</script><noscript>2022</noscript> Victor Blancada. All Rights Reserved.
			</footer>
			<div class="spacer">
			</div>
		</div>
	</body>
</html>

